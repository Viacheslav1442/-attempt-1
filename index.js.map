{"version":3,"file":"index.js","sources":["../src/js/artist-section.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst API_URL = 'https://sound-wave.b.goit.study/api';\nlet offset = 0;\nconst limit = 8;\nlet allArtists = [];\n\nlet artistsContainer;\nlet loadMoreBtn;\nlet modal;\nlet modalContent;\nlet closeModal;\n\n/**\n * Truncates text to a maximum number of lines.\n *\n * @param {string} text - The text to truncate.\n * @param {number} maxLines - The maximum number of lines to display.\n * @returns {string} The truncated text, or the original text if it's within the limit.\n */\nfunction truncateText(text, maxLines = 5) {\n    const lines = text.split('\\n');\n    return lines.length > maxLines\n        ? lines.slice(0, maxLines).join('\\n') + '...'\n        : text;\n}\n\nfunction getGenres(artist) {\n    // Підтримка fallback для API TheAudioDB\n    return artist.strGenre || artist.strStyle || artist.strMood || 'N/A';\n}\n\nfunction createCard(artist) {\n    const card = document.createElement('div');\n    card.className = 'artist-card';\n\n    const img = document.createElement('img');\n    img.src = artist.strArtistThumb || 'https://placehold.co/150x150/cccccc/333333?text=No+Image';\n    img.alt = artist.strArtist || 'No Image';\n    img.addEventListener('error', function () {\n        this.src = 'https://placehold.co/150x150/cccccc/333333?text=No+Image';\n        this.alt = 'No Image Available';\n    });\n    card.appendChild(img);\n\n    const h3 = document.createElement('h3');\n    h3.textContent = artist.strArtist || 'Unknown Artist';\n    card.appendChild(h3);\n\n    const genresP = document.createElement('p');\n    const genresStrong = document.createElement('strong');\n    genresStrong.textContent = 'Genres: ';\n    genresP.appendChild(genresStrong);\n    genresP.append(getGenres(artist));\n    card.appendChild(genresP);\n\n    const shortInfoP = document.createElement('p');\n    // Apply truncateText here\n    shortInfoP.textContent = truncateText(artist.strBiographyEN || 'No short info available.');\n    card.appendChild(shortInfoP);\n\n    const learnMoreButton = document.createElement('button');\n    learnMoreButton.className = 'learn-more-btn';\n    learnMoreButton.textContent = 'Learn More';\n    learnMoreButton.addEventListener('click', () => {\n        showModal(artist);\n    });\n    card.appendChild(learnMoreButton);\n\n    return card;\n}\n\nfunction showModal(artist) {\n    modalContent.innerHTML = '';\n\n    const modalTitle = document.createElement('h2');\n    modalTitle.textContent = artist.strArtist || 'Unknown Artist';\n    modalContent.appendChild(modalTitle);\n\n    const genresP = document.createElement('p');\n    const genresStrong = document.createElement('strong');\n    genresStrong.textContent = 'Genres: ';\n    genresP.appendChild(genresStrong);\n    genresP.append(getGenres(artist));\n    modalContent.appendChild(genresP);\n\n    const descriptionP = document.createElement('p');\n    descriptionP.textContent = artist.strBiographyEN || 'No detailed description available.';\n    modalContent.appendChild(descriptionP);\n\n    modal.style.display = 'flex';\n}\n\nasync function loadArtistsDataAndDisplay() {\n    try {\n        if (offset === 0) {\n            console.log('Sending initial request to: ${ API_URL } / artists');\n            const response = await axios.get('${ API_URL } / artists');\n            const data = response.data.artists;\n\n            if (!Array.isArray(data)) {\n                console.error('API response is not an array:', data);\n                loadMoreBtn.style.display = 'none';\n                return;\n            }\n            allArtists = data;\n        }\n\n        if (offset >= allArtists.length) {\n            loadMoreBtn.style.display = 'none';\n            return;\n        }\n\n        const artistsToDisplay = allArtists.slice(offset, offset + limit);\n        artistsToDisplay.forEach((artist) => {\n            const card = createCard(artist);\n            artistsContainer.appendChild(card);\n        });\n\n        offset += limit;\n\n        loadMoreBtn.style.display = offset < allArtists.length ? 'block' : 'none';\n\n    } catch (error) {\n        console.error('Axios error during artist loading:', error);\n\n        if (axios.isAxiosError(error) && error.response) {\n            console.error('Status:', error.response.status);\n            console.error('Data:', error.response.data);\n            console.error('Headers:', error.response.headers);\n        } else if (error.request) {\n            console.error('No response received from API for the request.');\n        } else {\n            console.error('Error setting up the request:', error.message);\n        }\n\n        loadMoreBtn.style.display = 'none';\n    }\n}\n\nfunction initArtistSection() {\n    artistsContainer = document.getElementById('artistsContainer');\n    loadMoreBtn = document.getElementById('loadMoreBtn');\n    modal = document.getElementById('modal');\n    modalContent = document.getElementById('modalContent');\n    closeModal = document.getElementById('closeModal');\n\n    closeModal.onclick = () => {\n        modal.style.display = 'none';\n    };\n\n    window.onclick = (e) => {\n        if (e.target === modal) {\n            modal.style.display = 'none';\n        }\n    };\n\n    loadMoreBtn.onclick = loadArtistsDataAndDisplay;\n    loadArtistsDataAndDisplay();\n}\n\nexport { initArtistSection };","import { initArtistSection } from './js/artist-section.js'\n\n// Чекаємо, доки DOM буде повністю завантажений, перш ніж ініціалізувати додаток\ndocument.addEventListener('DOMContentLoaded', () => {\n    initArtistSection();\n});\n\n"],"names":["offset","limit","allArtists","artistsContainer","loadMoreBtn","modal","modalContent","closeModal","truncateText","text","maxLines","lines","getGenres","artist","createCard","card","img","h3","genresP","genresStrong","shortInfoP","learnMoreButton","showModal","modalTitle","descriptionP","loadArtistsDataAndDisplay","data","axios","error","initArtistSection"],"mappings":"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"}