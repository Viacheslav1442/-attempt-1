{"version":3,"file":"index.js","sources":["../src/js/soundwave-api.js","../src/js/artist-details-modal.js","../src/js/artist-section.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: 'https://sound-wave.b.goit.study/api',\n  timeout: 5000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\napi.interceptors.response.use(\n  response => response,\n  error => {\n    // iziToast.error або alert на вибір\n    alert('Сталася помилка при запиті до сервера. Спробуйте ще раз.');\n    return Promise.reject(error);\n  }\n);\n\nexport async function fetchArtists() {\n  try {\n    const response = await api.get('/artists');\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function fetchArtistById(id) {\n  try {\n    const response = await api.get(`/artists/${id}`);\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function fetchReviews() {\n  try {\n    const response = await api.get('/reviews');\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n}","import { fetchArtistById } from './soundwave-api.js';\n\nconst modal = document.querySelector('[data-modal]');\nconst modalContent = document.getElementById('modal-inner-content');\nconst backdrop = document.querySelector('[data-modal-backdrop]');\nconst loader = document.getElementById('loader');\n\n// ==== Лоадер ====\nfunction showLoader() {\n  loader.classList.remove('is-hidden');\n}\nfunction hideLoader() {\n  loader.classList.add('is-hidden');\n}\n\n// ==== Модалка ====\nfunction openModal() {\n  modal.classList.remove('is-hidden');\n  document.body.style.overflow = 'hidden';\n  document.addEventListener('keydown', onEscKeyPress);\n}\n\nfunction closeModal() {\n  modal.classList.add('is-hidden');\n  document.body.style.overflow = '';\n  document.removeEventListener('keydown', onEscKeyPress);\n  modalContent.innerHTML = '';\n}\n\nfunction onEscKeyPress(e) {\n  if (e.key === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction onBackdropClick(e) {\n  if (e.target === backdrop) {\n    closeModal();\n  }\n}\n\nmodal.addEventListener('click', e => {\n  if (e.target.closest('[data-modal-close]')) {\n    closeModal();\n  }\n});\n\nbackdrop.addEventListener('click', onBackdropClick);\n\n// ==== Формат часу ====\nfunction formatDuration(ms) {\n  const totalSec = Math.floor(ms / 1000);\n  const min = Math.floor(totalSec / 60);\n  const sec = totalSec % 60;\n  return `${min}:${sec.toString().padStart(2, '0')}`;\n}\n\n// ==== Відкрити модалку по id артиста ====\nexport async function openArtistModal(artistId) {\n  try {\n    showLoader();\n    const data = await fetchArtistById(artistId);\n    hideLoader();\n    renderArtistModal(data);\n  } catch (error) {\n    hideLoader();\n    console.error('Error fetching artist:', error);\n    alert('Не вдалося завантажити інформацію про виконавця.');\n  }\n}\n\n// ==== Рендер модалки ====\nfunction renderArtistModal(data) {\n  const {\n    strArtist: name,\n    strArtistThumb: image,\n    intFormedYear,\n    intDiedYear,\n    strGender: sex,\n    intMembers: members,\n    strCountry: country,\n    strBiographyEN: biography,\n    genres,\n    albumsList,\n  } = data;\n\n  const isSoloArtist = members === 1;\n  const artistTypeInfo = isSoloArtist\n    ? `<li><strong>Sex:</strong> ${sex || '—'}</li>`\n    : `<li><strong>Members:</strong> ${members || '—'}</li>`;\n\n  const yearsText =\n    intFormedYear && intDiedYear\n      ? `${intFormedYear}–${intDiedYear}`\n      : intFormedYear\n        ? `${intFormedYear}–present`\n        : 'information missing';\n\n  const metaHTML = `\n    <ul class=\"artist-meta-list\">\n      <li><strong>Years active:</strong> ${yearsText}</li>\n      ${artistTypeInfo}\n      <li><strong>Country:</strong> ${country || '—'}</li>\n    </ul>`;\n\n  const tagsHTML = genres?.map(tag => `<li>${tag}</li>`).join('') || '';\n\n  const albumsHTML =\n    albumsList\n      ?.map(album => {\n        const { strAlbum, tracks } = album;\n        const trackItems = tracks\n          .map(track => {\n            const link =\n              track.movie && track.movie !== 'null'\n                ? `<a href=\"${track.movie}\" target=\"_blank\" rel=\"noopener\">\n              <svg class=\"icon\" width=\"24\" height=\"24\" fill=\"white\">\n                <use href=\"${import.meta.env.BASE_URL\n                }img/icons.svg#icon-youtube\"></use>\n              </svg>\n            </a>`\n                : '';\n            return `<li><span>${track.strTrack}</span><span>${formatDuration(\n              track.intDuration\n            )}</span>${link}</li>`;\n          })\n          .join('');\n\n        return `\n      <div class=\"album-card\">\n        <h4>${strAlbum}</h4>\n        <div class=\"track-header\">\n          <span>Track</span><span>Time</span><span>Link</span>\n        </div>\n        <ul class=\"track-list\">${trackItems}</ul>\n      </div>`;\n      })\n      .join('') || '';\n\n  modalContent.innerHTML = `\n    <button class=\"artist-modal-close\" type=\"button\" data-modal-close>\n      <svg class=\"icon\" width=\"14\" height=\"14\" fill=\"white\">\n        <use href=\"${import.meta.env.BASE_URL}img/icons.svg#icon-close\"></use>\n      </svg>\n    </button>\n    <h2 class=\"artist-modal-title\">${name}</h2>\n    <div class=\"artist-modal-info\">\n      <img src=\"${image || 'https://placehold.co/300x300'\n    }\" alt=\"${name}\" class=\"artist-modal-img\" />\n      <div class=\"artist-modal-bio\">\n        ${metaHTML}\n        <div class=\"artist-bio\">\n          <h3 class=\"bio-title\">Biography</h3>\n          <p>${biography || '—'}</p>\n        </div>\n        <ul class=\"artist-tags\">${tagsHTML}</ul>\n      </div>\n    </div>\n    <div class=\"artist-albums\">\n      <h3>Albums</h3>\n      <div class=\"album-grid\">${albumsHTML}</div>\n    </div>\n  `;\n\n  openModal();\n}","import { fetchArtists } from './soundwave-api.js';\nimport { openArtistModal } from './artist-details-modal.js';\n\nlet offset = 0;\nconst limit = 8;\nlet allArtists = [];\n\nlet artistsContainer;\nlet loadMoreBtn;\n\n// ==== LOADER ====\nfunction showLoader() {\n    document.body.classList.add('loading');\n}\n\nfunction hideLoader() {\n    document.body.classList.remove('loading');\n}\n\n// ==== HELPER ====\nfunction disableLoadMoreButton() {\n    loadMoreBtn?.classList.add('hidden');\n    loadMoreBtn?.setAttribute('disabled', true);\n}\n\nfunction enableLoadMoreButton() {\n    loadMoreBtn?.classList.remove('hidden');\n    loadMoreBtn?.removeAttribute('disabled');\n}\n\nfunction getGenres(artist) {\n    if (!artist || typeof artist !== 'object') return [];\n    if (Array.isArray(artist.genres) && artist.genres.length > 0) {\n        return artist.genres.filter(Boolean);\n    }\n    return [];\n}\n\n// ==== CARD GENERATION ====\nasync function createCard(artist) {\n    const li = document.createElement('li');\n    li.className = 'artist-card';\n\n    const img = document.createElement('img');\n    img.src =\n        artist.strArtistThumb ||\n        'https://placehold.co/150x150/cccccc/333333?text=No+Image';\n    img.alt = artist.strArtist || 'No Image';\n    img.addEventListener('error', function () {\n        this.src = 'https://placehold.co/150x150/cccccc/333333?text=No+Image';\n        this.alt = 'No Image Available';\n    });\n    li.appendChild(img);\n\n    const h3 = document.createElement('h3');\n    h3.textContent = artist.strArtist || 'Unknown Artist';\n    li.appendChild(h3);\n\n    const shortInfoP = document.createElement('p');\n    shortInfoP.className = 'artist-description';\n    const bio = artist.strBiographyEN || 'No short info available.';\n    shortInfoP.textContent = bio.length > 200 ? bio.slice(0, 200) + '...' : bio;\n    li.appendChild(shortInfoP);\n\n    const genresList = getGenres(artist);\n    if (genresList.length > 0) {\n        const ul = document.createElement('ul');\n        ul.classList.add('artist-genres-list');\n        genresList.forEach(genre => {\n            const genreLi = document.createElement('li');\n            genreLi.classList.add('genres-list-item');\n            genreLi.textContent = genre;\n            ul.appendChild(genreLi);\n        });\n        li.appendChild(ul);\n    }\n\n    const learnMoreButton = document.createElement('button');\n    learnMoreButton.className = 'learn-more-btn';\n    learnMoreButton.textContent = 'Learn More';\n    learnMoreButton.dataset.artistId = artist._id;\n\n    const learnMoreIcon = document.createElement('svg');\n    learnMoreIcon.setAttribute('class', 'learn-more-icon');\n    learnMoreIcon.setAttribute('width', '8');\n    learnMoreIcon.setAttribute('height', '16');\n\n    const useElement = document.createElement('use');\n    useElement.setAttribute(\n        'href',\n        `${import.meta.env.BASE_URL}img/icons.svg#icon-filled-arrow`\n    );\n\n    learnMoreIcon.appendChild(useElement);\n    learnMoreButton.appendChild(learnMoreIcon);\n    li.appendChild(learnMoreButton);\n\n    return li;\n}\n\n// ==== MAIN FETCH AND DISPLAY ====\nasync function loadArtistsDataAndDisplay() {\n    showLoader();\n    try {\n        if (offset === 0) {\n            const data = await fetchArtists();\n            const artistsArray = Array.isArray(data?.artists) ? data.artists : null;\n            if (!artistsArray) {\n                alert('Error: Received invalid data from server.');\n                disableLoadMoreButton();\n                return;\n            }\n            allArtists = artistsArray;\n            artistsContainer.innerHTML = '';\n        }\n\n        const artistsToDisplay = allArtists.slice(offset, offset + limit);\n        for (const artist of artistsToDisplay) {\n            const card = await createCard(artist);\n            artistsContainer.appendChild(card);\n        }\n\n        offset += limit;\n\n        if (offset >= allArtists.length) {\n            disableLoadMoreButton();\n        } else {\n            enableLoadMoreButton();\n        }\n    } catch (error) {\n        alert('Failed to load artists. Please try again later.');\n        disableLoadMoreButton();\n    } finally {\n        hideLoader();\n    }\n}\n\n// ==== INIT ====\nfunction initArtistSection() {\n    artistsContainer = document.getElementById('artistsContainer');\n    loadMoreBtn = document.getElementById('loadMoreBtn');\n\n    if (!artistsContainer || !loadMoreBtn) return;\n\n    loadMoreBtn.onclick = loadArtistsDataAndDisplay;\n    loadArtistsDataAndDisplay();\n\n    artistsContainer.addEventListener('click', e => {\n        const button = e.target.closest('.learn-more-btn');\n        if (button) {\n            const artistId = button.dataset.artistId;\n            if (artistId) openArtistModal(artistId);\n        }\n    });\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    initArtistSection();\n});\n\nexport { initArtistSection };\n","import { initArtistSection } from './js/artist-section.js'\n\n// Чекаємо, доки DOM буде повністю завантажений, перш ніж ініціалізувати додаток\ndocument.addEventListener('DOMContentLoaded', () => {\n    initArtistSection();\n});\n\n"],"names":["api","axios","response","error","fetchArtists","fetchArtistById","id","modal","modalContent","backdrop","loader","showLoader","hideLoader","openModal","onEscKeyPress","closeModal","e","onBackdropClick","formatDuration","ms","totalSec","min","sec","openArtistModal","artistId","data","renderArtistModal","name","image","intFormedYear","intDiedYear","sex","members","country","biography","genres","albumsList","artistTypeInfo","metaHTML","tagsHTML","tag","albumsHTML","album","strAlbum","tracks","trackItems","track","link","offset","limit","allArtists","artistsContainer","loadMoreBtn","disableLoadMoreButton","enableLoadMoreButton","getGenres","artist","createCard","li","img","h3","shortInfoP","bio","genresList","ul","genre","genreLi","learnMoreButton","learnMoreIcon","useElement","loadArtistsDataAndDisplay","artistsArray","artistsToDisplay","card","initArtistSection","button"],"mappings":"svBAEA,MAAMA,EAAMC,EAAM,OAAO,CACvB,QAAS,sCACT,QAAS,IACT,QAAS,CACP,eAAgB,kBACjB,CACH,CAAC,EAEDD,EAAI,aAAa,SAAS,IACxBE,GAAYA,EACZC,IAEE,MAAM,0DAA0D,EACzD,QAAQ,OAAOA,CAAK,EAE/B,EAEO,eAAeC,GAAe,CACnC,GAAI,CAEF,OADiB,MAAMJ,EAAI,IAAI,UAAU,GACzB,IACjB,OAAQG,EAAO,CACd,MAAMA,CACP,CACH,CAEO,eAAeE,EAAgBC,EAAI,CACxC,GAAI,CAEF,OADiB,MAAMN,EAAI,IAAI,YAAYM,CAAE,EAAE,GAC/B,IACjB,OAAQH,EAAO,CACd,MAAMA,CACP,CACH,CCjCA,MAAMI,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAe,SAAS,eAAe,qBAAqB,EAC5DC,EAAW,SAAS,cAAc,uBAAuB,EACzDC,EAAS,SAAS,eAAe,QAAQ,EAG/C,SAASC,GAAa,CACbD,EAAA,UAAU,OAAO,WAAW,CACrC,CACA,SAASE,GAAa,CACbF,EAAA,UAAU,IAAI,WAAW,CAClC,CAGA,SAASG,GAAY,CACbN,EAAA,UAAU,OAAO,WAAW,EACzB,SAAA,KAAK,MAAM,SAAW,SACtB,SAAA,iBAAiB,UAAWO,CAAa,CACpD,CAEA,SAASC,GAAa,CACdR,EAAA,UAAU,IAAI,WAAW,EACtB,SAAA,KAAK,MAAM,SAAW,GACtB,SAAA,oBAAoB,UAAWO,CAAa,EACrDN,EAAa,UAAY,EAC3B,CAEA,SAASM,EAAcE,EAAG,CACpBA,EAAE,MAAQ,UACDD,GAEf,CAEA,SAASE,EAAgBD,EAAG,CACtBA,EAAE,SAAWP,GACJM,GAEf,CAEAR,EAAM,iBAAiB,QAAcS,GAAA,CAC/BA,EAAE,OAAO,QAAQ,oBAAoB,GAC5BD,GAEf,CAAC,EAEDN,EAAS,iBAAiB,QAASQ,CAAe,EAGlD,SAASC,EAAeC,EAAI,CAC1B,MAAMC,EAAW,KAAK,MAAMD,EAAK,GAAI,EAC/BE,EAAM,KAAK,MAAMD,EAAW,EAAE,EAC9BE,EAAMF,EAAW,GAChB,MAAA,GAAGC,CAAG,IAAIC,EAAI,WAAW,SAAS,EAAG,GAAG,CAAC,EAClD,CAGA,eAAsBC,EAAgBC,EAAU,CAC1C,GAAA,CACSb,IACL,MAAAc,EAAO,MAAMpB,EAAgBmB,CAAQ,EAChCZ,IACXc,EAAkBD,CAAI,QACftB,EAAO,CACHS,IACH,QAAA,MAAM,yBAA0BT,CAAK,EAC7C,MAAM,kDAAkD,CAC1D,CACF,CAGA,SAASuB,EAAkBD,EAAM,CACzB,KAAA,CACJ,UAAWE,EACX,eAAgBC,EAChB,cAAAC,EACA,YAAAC,EACA,UAAWC,EACX,WAAYC,EACZ,WAAYC,EACZ,eAAgBC,EAChB,OAAAC,EACA,WAAAC,CACE,EAAAX,EAGEY,EADeL,IAAY,EAE7B,6BAA6BD,GAAO,GAAG,QACvC,iCAAiCC,GAAW,GAAG,QAS7CM,EAAW;AAAA;AAAA,2CANfT,GAAiBC,EACb,GAAGD,CAAa,IAAIC,CAAW,GAC/BD,EACE,GAAGA,CAAa,WAChB,qBAI0C;AAAA,QAC5CQ,CAAc;AAAA,sCACgBJ,GAAW,GAAG;AAAA,WAG5CM,GAAWJ,GAAA,YAAAA,EAAQ,IAAWK,GAAA,OAAOA,CAAG,SAAS,KAAK,MAAO,GAE7DC,GACJL,GAAA,YAAAA,EACI,IAAaM,GAAA,CACP,KAAA,CAAE,SAAAC,EAAU,OAAAC,CAAW,EAAAF,EACvBG,EAAaD,EAChB,IAAaE,GAAA,CACN,MAAAC,EACJD,EAAM,OAASA,EAAM,QAAU,OAC3B,YAAYA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,kBAMvB,GACC,MAAA,aAAaA,EAAM,QAAQ,gBAAgB5B,EAChD4B,EAAM,WAAA,CACP,UAAUC,CAAI,OAAA,CAChB,EACA,KAAK,EAAE,EAEH,MAAA;AAAA;AAAA,cAEDJ,CAAQ;AAAA;AAAA;AAAA;AAAA,iCAIWE,CAAU;AAAA,aAEpC,GACA,KAAK,MAAO,GAEjBrC,EAAa,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAMUmB,CAAI;AAAA;AAAA,kBAEvBC,GAAS,8BACvB,UAAUD,CAAI;AAAA;AAAA,UAERW,CAAQ;AAAA;AAAA;AAAA,eAGHJ,GAAa,GAAG;AAAA;AAAA,kCAEGK,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,gCAKVE,CAAU;AAAA;AAAA,IAI9B5B,GACZ,CClKA,IAAImC,EAAS,EACb,MAAMC,EAAQ,EACd,IAAIC,EAAa,CAAA,EAEbC,EACAC,EAGJ,SAASzC,GAAa,CACT,SAAA,KAAK,UAAU,IAAI,SAAS,CACzC,CAEA,SAASC,GAAa,CACT,SAAA,KAAK,UAAU,OAAO,SAAS,CAC5C,CAGA,SAASyC,GAAwB,CAChBD,GAAA,MAAAA,EAAA,UAAU,IAAI,UACdA,GAAA,MAAAA,EAAA,aAAa,WAAY,GAC1C,CAEA,SAASE,GAAuB,CACfF,GAAA,MAAAA,EAAA,UAAU,OAAO,UAC9BA,GAAA,MAAAA,EAAa,gBAAgB,WACjC,CAEA,SAASG,EAAUC,EAAQ,CACvB,MAAI,CAACA,GAAU,OAAOA,GAAW,SAAiB,CAAA,EAC9C,MAAM,QAAQA,EAAO,MAAM,GAAKA,EAAO,OAAO,OAAS,EAChDA,EAAO,OAAO,OAAO,OAAO,EAEhC,EACX,CAGA,eAAeC,EAAWD,EAAQ,CACxB,MAAAE,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,UAAY,cAET,MAAAC,EAAM,SAAS,cAAc,KAAK,EACpCA,EAAA,IACAH,EAAO,gBACP,2DACAG,EAAA,IAAMH,EAAO,WAAa,WAC1BG,EAAA,iBAAiB,QAAS,UAAY,CACtC,KAAK,IAAM,2DACX,KAAK,IAAM,oBAAA,CACd,EACDD,EAAG,YAAYC,CAAG,EAEZ,MAAAC,EAAK,SAAS,cAAc,IAAI,EACnCA,EAAA,YAAcJ,EAAO,WAAa,iBACrCE,EAAG,YAAYE,CAAE,EAEX,MAAAC,EAAa,SAAS,cAAc,GAAG,EAC7CA,EAAW,UAAY,qBACjB,MAAAC,EAAMN,EAAO,gBAAkB,2BAC1BK,EAAA,YAAcC,EAAI,OAAS,IAAMA,EAAI,MAAM,EAAG,GAAG,EAAI,MAAQA,EACxEJ,EAAG,YAAYG,CAAU,EAEnB,MAAAE,EAAaR,EAAUC,CAAM,EAC/B,GAAAO,EAAW,OAAS,EAAG,CACjB,MAAAC,EAAK,SAAS,cAAc,IAAI,EACnCA,EAAA,UAAU,IAAI,oBAAoB,EACrCD,EAAW,QAAiBE,GAAA,CAClB,MAAAC,EAAU,SAAS,cAAc,IAAI,EACnCA,EAAA,UAAU,IAAI,kBAAkB,EACxCA,EAAQ,YAAcD,EACtBD,EAAG,YAAYE,CAAO,CAAA,CACzB,EACDR,EAAG,YAAYM,CAAE,CACrB,CAEM,MAAAG,EAAkB,SAAS,cAAc,QAAQ,EACvDA,EAAgB,UAAY,iBAC5BA,EAAgB,YAAc,aACdA,EAAA,QAAQ,SAAWX,EAAO,IAEpC,MAAAY,EAAgB,SAAS,cAAc,KAAK,EACpCA,EAAA,aAAa,QAAS,iBAAiB,EACvCA,EAAA,aAAa,QAAS,GAAG,EACzBA,EAAA,aAAa,SAAU,IAAI,EAEnC,MAAAC,EAAa,SAAS,cAAc,KAAK,EACpC,OAAAA,EAAA,aACP,OACA,6CAA2B,EAG/BD,EAAc,YAAYC,CAAU,EACpCF,EAAgB,YAAYC,CAAa,EACzCV,EAAG,YAAYS,CAAe,EAEvBT,CACX,CAGA,eAAeY,GAA4B,CAC5B3D,IACP,GAAA,CACA,GAAIqC,IAAW,EAAG,CACR,MAAAvB,EAAO,MAAMrB,IACbmE,EAAe,MAAM,QAAQ9C,GAAA,YAAAA,EAAM,OAAO,EAAIA,EAAK,QAAU,KACnE,GAAI,CAAC8C,EAAc,CACf,MAAM,2CAA2C,EAC3BlB,IACtB,MACJ,CACaH,EAAAqB,EACbpB,EAAiB,UAAY,EACjC,CAEA,MAAMqB,EAAmBtB,EAAW,MAAMF,EAAQA,EAASC,CAAK,EAChE,UAAWO,KAAUgB,EAAkB,CAC7B,MAAAC,EAAO,MAAMhB,EAAWD,CAAM,EACpCL,EAAiB,YAAYsB,CAAI,CACrC,CAEUzB,GAAAC,EAEND,GAAUE,EAAW,OACCG,IAEDC,SAEb,CACZ,MAAM,iDAAiD,EACjCD,GAAA,QACxB,CACazC,GACf,CACJ,CAGA,SAAS8D,GAAoB,CACNvB,EAAA,SAAS,eAAe,kBAAkB,EAC/CC,EAAA,SAAS,eAAe,aAAa,EAE/C,GAACD,GAAoB,CAACC,KAE1BA,EAAY,QAAUkB,EACIA,IAETnB,EAAA,iBAAiB,QAAcnC,GAAA,CAC5C,MAAM2D,EAAS3D,EAAE,OAAO,QAAQ,iBAAiB,EACjD,GAAI2D,EAAQ,CACF,MAAAnD,EAAWmD,EAAO,QAAQ,SAC5BnD,KAA0BA,CAAQ,CAC1C,CAAA,CACH,EACL,CAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAC9BkD,GACtB,CAAC,EC3JD,SAAS,iBAAiB,mBAAoB,IAAM,CAChDA,GACJ,CAAC"}