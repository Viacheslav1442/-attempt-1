{"version":3,"file":"index.js","sources":["../src/js/soundwave-api.js","../src/js/artist-section.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: 'https://sound-wave.b.goit.study/api',\n  timeout: 5000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\napi.interceptors.response.use(\n  response => response,\n  error => {\n    // iziToast.error або alert на вибір\n    alert('Сталася помилка при запиті до сервера. Спробуйте ще раз.');\n    return Promise.reject(error);\n  }\n);\n\nexport async function fetchArtists() {\n  try {\n    const response = await api.get('/artists');\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function fetchArtistById(id) {\n  try {\n    const response = await api.get(`/artists/${id}`);\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function fetchReviews() {\n  try {\n    const response = await api.get('/reviews');\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n}","import { fetchArtists } from './soundwave-api.js';\n\nlet offset = 0;\nconst limit = 8;\nlet allArtists = [];\n\nlet artistsContainer;\nlet loadMoreBtn;\n\nfunction showLoader() {\n    const loader = document.getElementById('loader');\n    if (loader) loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n    const loader = document.getElementById('loader');\n    if (loader) loader.classList.add('hidden');\n}\n\nfunction getGenres(artist) {\n    const genres = [\n        artist.strGenre,\n        artist.strStyle,\n        artist.strMood,\n        artist.strGenre2,\n        artist.strGenre3,\n        artist.strMood2,\n        artist.strMood3,\n    ].filter(Boolean);\n\n    return genres.length > 0 ? genres.join(', ') : 'N/A';\n}\n\nfunction createCard(artist) {\n    const card = document.createElement('div');\n    card.className = 'artist-card';\n\n    const img = document.createElement('img');\n    img.src =\n        artist.strArtistThumb ||\n        'https://placehold.co/150x150/cccccc/333333?text=No+Image';\n    img.alt = artist.strArtist || 'No Image';\n    img.addEventListener('error', function () {\n        if (!this.src.includes('placehold.co')) {\n            this.src = 'https://placehold.co/150x150/cccccc/333333?text=No+Image';\n            this.alt = 'No Image Available';\n        }\n    });\n    card.appendChild(img);\n\n    const h3 = document.createElement('h3');\n    h3.textContent = artist.strArtist || 'Unknown Artist';\n    card.appendChild(h3);\n\n    const genresP = document.createElement('p');\n    const genresStrong = document.createElement('strong');\n    genresStrong.textContent = 'Genres: ';\n    genresP.appendChild(genresStrong);\n    genresP.append(getGenres(artist));\n    card.appendChild(genresP);\n\n    const shortInfoP = document.createElement('p');\n    shortInfoP.className = 'artist-description';\n    const bio = artist.strBiographyEN || 'No short info available.';\n    shortInfoP.textContent = bio.length > 200 ? bio.slice(0, 200) + '...' : bio;\n    card.appendChild(shortInfoP);\n\n    const learnMoreButton = document.createElement('button');\n    learnMoreButton.className = 'learn-more-btn';\n    learnMoreButton.textContent = 'Learn More';\n    learnMoreButton.dataset.artistId = artist.idArtist;\n    card.appendChild(learnMoreButton);\n\n    return card;\n}\n\nasync function loadArtistsDataAndDisplay() {\n    try {\n        showLoader();\n\n        if (offset === 0) {\n            const data = await fetchArtists();\n\n            const artistsArray = Array.isArray(data)\n                ? data\n                : Array.isArray(data.artists)\n                    ? data.artists\n                    : null;\n\n            if (!artistsArray) {\n                alert('Error: Received invalid data from server.');\n                loadMoreBtn?.classList.add('hidden');\n                return;\n            }\n\n            allArtists = artistsArray;\n        }\n\n        const artistsToDisplay = allArtists.slice(offset, offset + limit);\n        artistsToDisplay.forEach(artist => {\n            const card = createCard(artist);\n            artistsContainer.appendChild(card);\n        });\n\n        offset += limit;\n\n        // 🔽 Тут основна перевірка, чи залишилися ще артисти\n        if (offset >= allArtists.length) {\n            loadMoreBtn?.classList.add('hidden');\n        } else {\n            loadMoreBtn?.classList.remove('hidden');\n        }\n    } catch (error) {\n        alert('Failed to load artists. Please try again later.');\n        loadMoreBtn?.classList.add('hidden');\n    } finally {\n        hideLoader();\n    }\n}\n\nfunction initArtistSection() {\n    artistsContainer = document.getElementById('artistsContainer');\n    loadMoreBtn = document.getElementById('loadMoreBtn');\n\n    if (!artistsContainer || !loadMoreBtn) return;\n\n    loadMoreBtn.onclick = loadArtistsDataAndDisplay;\n    loadArtistsDataAndDisplay();\n}\n\nexport { initArtistSection };","import { initArtistSection } from './js/artist-section.js'\n\n// Чекаємо, доки DOM буде повністю завантажений, перш ніж ініціалізувати додаток\ndocument.addEventListener('DOMContentLoaded', () => {\n    initArtistSection();\n});\n\n"],"names":["api","axios","response","error","fetchArtists","offset","limit","allArtists","artistsContainer","loadMoreBtn","showLoader","loader","hideLoader","getGenres","artist","genres","createCard","card","img","h3","genresP","genresStrong","shortInfoP","bio","learnMoreButton","loadArtistsDataAndDisplay","data","artistsArray","initArtistSection"],"mappings":"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"}