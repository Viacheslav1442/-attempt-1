{"version":3,"file":"index.js","sources":["../src/js/soundwave-api.js","../src/js/artist-section.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: 'https://sound-wave.b.goit.study/api',\n  timeout: 5000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\napi.interceptors.response.use(\n  response => response,\n  error => {\n    // iziToast.error або alert на вибір\n    alert('Сталася помилка при запиті до сервера. Спробуйте ще раз.');\n    return Promise.reject(error);\n  }\n);\n\nexport async function fetchArtists() {\n  try {\n    const response = await api.get('/artists');\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function fetchArtistById(id) {\n  try {\n    const response = await api.get(`/artists/${id}`);\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function fetchReviews() {\n  try {\n    const response = await api.get('/reviews');\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n}","\n\nimport { fetchArtists, fetchArtistById } from './soundwave-api.js';\n\nlet offset = 0;\nconst limit = 8;\nlet allArtists = [];\n\nlet artistsContainer;\nlet loadMoreBtn;\n\nfunction showLoader() {\n    const loader = document.getElementById('loader');\n    if (loader) loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n    const loader = document.getElementById('loader');\n    if (loader) loader.classList.add('hidden');\n}\n\nfunction getGenres(artist) {\n    if (!artist || typeof artist !== 'object') return 'N/A';\n\n\n    // console.log('getGenres input:', artist);\n\n    const genres = [\n        artist.strGenre,\n        artist.strGenre2,\n        artist.strGenre3,\n        artist.strStyle,\n        artist.strMood,\n        artist.strMood2,\n        artist.strMood3,\n    ]\n        .filter(val => typeof val === 'string' && val.trim())\n        .map(val => val.trim())\n        .filter((val, idx, arr) => arr.indexOf(val) === idx);\n\n    return genres.length ? genres.join(', ') : 'N/A';\n}\n\nasync function createCard(artist) {\n    const card = document.createElement('div');\n    card.className = 'artist-card';\n\n    const img = document.createElement('img');\n    img.src =\n        artist.strArtistThumb ||\n        'https://placehold.co/150x150/cccccc/333333?text=No+Image';\n    img.alt = artist.strArtist || 'No Image';\n    img.addEventListener('error', function () {\n        if (!this.src.includes('placehold.co')) {\n            this.src = 'https://placehold.co/150x150/cccccc/333333?text=No+Image';\n            this.alt = 'No Image Available';\n        }\n    });\n    card.appendChild(img);\n\n    const h3 = document.createElement('h3');\n    h3.textContent = artist.strArtist || 'Unknown Artist';\n    card.appendChild(h3);\n\n    const genresP = document.createElement('p');\n    const genresStrong = document.createElement('strong');\n    genresStrong.textContent = 'Genres: ';\n    genresP.appendChild(genresStrong);\n\n    // Відразу встановлюємо genresText, спочатку з основних даних артиста\n    let genresTextContent = getGenres(artist);\n    const genresText = document.createTextNode(genresTextContent);\n    genresP.appendChild(genresText);\n    card.appendChild(genresP);\n\n    const shortInfoP = document.createElement('p');\n    shortInfoP.className = 'artist-description';\n    const bio = artist.strBiographyEN || 'No short info available.';\n    shortInfoP.textContent = bio.length > 200 ? bio.slice(0, 200) + '...' : bio;\n    card.appendChild(shortInfoP);\n\n    const learnMoreButton = document.createElement('button');\n    learnMoreButton.className = 'learn-more-btn';\n    learnMoreButton.textContent = 'Learn More';\n\n    if (artist.idArtist) {\n        learnMoreButton.dataset.artistId = artist.idArtist;\n    } else {\n        learnMoreButton.disabled = true;\n    }\n\n    card.appendChild(learnMoreButton);\n\n\n    if (artist.idArtist) {\n        try {\n            const details = await fetchArtistById(artist.idArtist);\n            const fullArtist = details?.artists?.[0];\n\n            if (fullArtist) {\n                const updatedGenres = getGenres(fullArtist);\n                // console.log(`Updated genres for ${artist.strArtist}:`, updatedGenres);\n                genresText.textContent = updatedGenres;\n            } else {\n                genresText.textContent = 'N/A';\n            }\n        } catch (error) {\n            genresText.textContent = 'N/A';\n            // console.warn(`Genre fetch failed for ID ${artist.idArtist}:`, error);\n        }\n    }\n\n    return card;\n}\n\nasync function loadArtistsDataAndDisplay() {\n    try {\n        showLoader();\n\n        if (offset === 0) {\n            const data = await fetchArtists();\n\n            const artistsArray = Array.isArray(data)\n                ? data\n                : Array.isArray(data.artists)\n                    ? data.artists\n                    : null;\n\n            if (!artistsArray) {\n                alert('Error: Received invalid data from server.');\n                loadMoreBtn?.classList.add('hidden');\n                loadMoreBtn?.setAttribute('disabled', true);\n                return;\n            }\n\n            allArtists = artistsArray;\n            artistsContainer.innerHTML = '';\n        }\n\n        const artistsToDisplay = allArtists.slice(offset, offset + limit);\n        for (const artist of artistsToDisplay) {\n            const card = await createCard(artist);\n            artistsContainer.appendChild(card);\n        }\n\n        offset += limit;\n\n        if (offset >= allArtists.length) {\n            loadMoreBtn?.classList.add('hidden');\n            loadMoreBtn?.setAttribute('disabled', true);\n        } else {\n            loadMoreBtn?.classList.remove('hidden');\n            loadMoreBtn?.removeAttribute('disabled');\n        }\n    } catch (error) {\n        alert('Failed to load artists. Please try again later.');\n        loadMoreBtn?.classList.add('hidden');\n        loadMoreBtn?.setAttribute('disabled', true);\n    } finally {\n        hideLoader();\n    }\n}\n\nfunction initArtistSection() {\n    artistsContainer = document.getElementById('artistsContainer');\n    loadMoreBtn = document.getElementById('loadMoreBtn');\n\n    if (!artistsContainer || !loadMoreBtn) return;\n\n    loadMoreBtn.onclick = loadArtistsDataAndDisplay;\n    loadArtistsDataAndDisplay();\n\n    artistsContainer.addEventListener('click', async (e) => {\n        if (e.target.classList.contains('learn-more-btn')) {\n            const artistId = e.target.dataset.artistId;\n\n            if (!artistId) {\n                alert('Невідомий артист. Ідентифікатор відсутній.');\n                return;\n            }\n\n            try {\n                const artistData = await fetchArtistById(artistId);\n                if (!artistData || !artistData.artists || !artistData.artists[0]) {\n                    alert('Artist details not found.');\n                    return;\n                }\n\n                // console.log('Artist details:', artistData.artists[0]); // ← закоментовано\n            } catch (error) {\n                alert('Failed to load artist details.');\n            }\n        }\n    });\n}\n\nexport { initArtistSection };\n","import { initArtistSection } from './js/artist-section.js'\n\n// Чекаємо, доки DOM буде повністю завантажений, перш ніж ініціалізувати додаток\ndocument.addEventListener('DOMContentLoaded', () => {\n    initArtistSection();\n});\n\n"],"names":["api","axios","response","error","fetchArtists","fetchArtistById","id","offset","limit","allArtists","artistsContainer","loadMoreBtn","showLoader","loader","hideLoader","getGenres","artist","genres","val","idx","arr","createCard","card","img","h3","genresP","genresStrong","genresTextContent","genresText","shortInfoP","bio","learnMoreButton","details","fullArtist","_a","updatedGenres","loadArtistsDataAndDisplay","data","artistsArray","artistsToDisplay","initArtistSection","e","artistId","artistData"],"mappings":"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"}