{"version":3,"file":"index.js","sources":["../src/js/soundwave-api.js","../src/js/artist-section.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n\nconst api = axios.create({\n  baseURL: 'https://sound-wave.b.goit.study/api', // \n  timeout: 5000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// ➕ Interceptors — показ лоадера перед запитом\napi.interceptors.request.use(\n  config => {\n    showLoader();\n    return config;\n  },\n  error => {\n    hideLoader();\n    return Promise.reject(error);\n  }\n);\n\n// ➖ Interceptors — приховування лоадера після відповіді/помилки\napi.interceptors.response.use(\n  response => {\n    hideLoader();\n    return response;\n  },\n  error => {\n    hideLoader();\n    iziToast.error({\n      title: 'Помилка',\n      message: 'Сталася помилка при запиті до сервера. Спробуйте ще раз.',\n      position: 'topRight',\n    });\n    return Promise.reject(error);\n  }\n);\n\n// ========== Функції запитів ==========\n\nexport async function fetchArtists() {\n  try {\n    const response = await api.get('/artists');\n    return response.data;\n  } catch (error) {\n    console.error('❌ Помилка при отриманні артистів:', error);\n    throw error;\n  }\n}\n\nexport async function fetchArtistById(id) {\n  try {\n    const response = await api.get(`/artists/${id}`);\n    return response.data;\n  } catch (error) {\n    console.error(`❌ Помилка при отриманні артиста з ID = ${id}:`, error);\n    throw error;\n  }\n}\n\nexport async function fetchReviews() {\n  try {\n    const response = await api.get('/reviews');\n    return response.data;\n  } catch (error) {\n    console.error('❌ Помилка при отриманні відгуків:', error);\n    throw error;\n  }\n}\n","import { fetchArtists } from './soundwave-api.js'; // імпортується лише fetchArtists\n\nlet offset = 0;\nconst limit = 8;\nlet allArtists = [];\n\nlet artistsContainer;\nlet loadMoreBtn;\n\nfunction getGenres(artist) {\n    const genres = [\n        artist.strGenre,\n        artist.strStyle,\n        artist.strMood,\n        artist.strGenre2,\n        artist.strGenre3,\n        artist.strMood2,\n        artist.strMood3,\n    ].filter(Boolean);\n\n    return genres.length > 0 ? genres.join(', ') : 'N/A';\n}\n\nfunction createCard(artist) {\n    const card = document.createElement('div');\n    card.className = 'artist-card';\n\n    const img = document.createElement('img');\n    img.src =\n        artist.strArtistThumb ||\n        'https://placehold.co/150x150/cccccc/333333?text=No+Image';\n    img.alt = artist.strArtist || 'No Image';\n    img.addEventListener('error', function () {\n        if (!this.src.includes('placehold.co')) {\n            this.src = 'https://placehold.co/150x150/cccccc/333333?text=No+Image';\n            this.alt = 'No Image Available';\n        }\n    });\n    card.appendChild(img);\n\n    const h3 = document.createElement('h3');\n    h3.textContent = artist.strArtist || 'Unknown Artist';\n    card.appendChild(h3);\n\n    const genresP = document.createElement('p');\n    const genresStrong = document.createElement('strong');\n    genresStrong.textContent = 'Genres: ';\n    genresP.appendChild(genresStrong);\n    genresP.append(getGenres(artist));\n    card.appendChild(genresP);\n\n    const shortInfoP = document.createElement('p');\n    shortInfoP.className = 'artist-description';\n    const bio = artist.strBiographyEN || 'No short info available.';\n    shortInfoP.textContent = bio.length > 200 ? bio.slice(0, 200) + '...' : bio;\n    card.appendChild(shortInfoP);\n\n    const learnMoreButton = document.createElement('button');\n    learnMoreButton.className = 'learn-more-btn';\n    learnMoreButton.textContent = 'Learn More';\n    learnMoreButton.dataset.artistId = artist.idArtist; // айді передається\n    card.appendChild(learnMoreButton);\n\n    return card;\n}\n\nasync function loadArtistsDataAndDisplay() {\n    try {\n        if (offset === 0) {\n            // console.log(`Sending initial request for artists`);\n            const data = await fetchArtists();\n\n            if (!Array.isArray(data)) {\n                // console.error('API response is not an array:', data);\n                alert('Error: Received invalid data from server.');\n                loadMoreBtn?.classList.add('hidden');\n                return;\n            }\n\n            allArtists = data;\n        }\n\n        if (offset >= allArtists.length) {\n            loadMoreBtn?.classList.add('hidden');\n            return;\n        }\n\n        const artistsToDisplay = allArtists.slice(offset, offset + limit);\n        artistsToDisplay.forEach((artist) => {\n            const card = createCard(artist);\n            artistsContainer.appendChild(card);\n        });\n\n        offset += limit;\n        if (offset >= allArtists.length) {\n            loadMoreBtn?.classList.add('hidden');\n        } else {\n            loadMoreBtn?.classList.remove('hidden');\n        }\n    } catch (error) {\n        // console.error('Error loading artists:', error);\n        alert('Failed to load artists. Please try again later.');\n        loadMoreBtn?.classList.add('hidden');\n    }\n}\n\nfunction initArtistSection() {\n    artistsContainer = document.getElementById('artistsContainer');\n    loadMoreBtn = document.getElementById('loadMoreBtn');\n\n    if (!artistsContainer || !loadMoreBtn) return;\n\n    loadMoreBtn.onclick = loadArtistsDataAndDisplay;\n    loadArtistsDataAndDisplay();\n}\n\nexport { initArtistSection };\n","import { initArtistSection } from './js/artist-section.js'\n\n// Чекаємо, доки DOM буде повністю завантажений, перш ніж ініціалізувати додаток\ndocument.addEventListener('DOMContentLoaded', () => {\n    initArtistSection();\n});\n\n"],"names":["api","axios","config","error","response","fetchArtists","offset","limit","allArtists","artistsContainer","loadMoreBtn","getGenres","artist","genres","createCard","card","img","h3","genresP","genresStrong","shortInfoP","bio","learnMoreButton","loadArtistsDataAndDisplay","data","initArtistSection"],"mappings":"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"}