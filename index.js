import{a as C}from"./assets/vendor-B2YOV0tR.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=e(n);fetch(n.href,i)}})();const h=C.create({baseURL:"https://sound-wave.b.goit.study/api",timeout:5e3,headers:{"Content-Type":"application/json"}});h.interceptors.response.use(t=>t,t=>(alert("Сталася помилка при запиті до сервера. Спробуйте ще раз."),Promise.reject(t)));async function E(){try{return(await h.get("/artists")).data}catch(t){throw t}}async function b(t){try{return(await h.get(`/artists/${t}`)).data}catch(r){throw r}}let d=0;const y=8;let p=[],l,s;function N(){const t=document.getElementById("loader");t&&t.classList.remove("hidden")}function v(){const t=document.getElementById("loader");t&&t.classList.add("hidden")}function I(t){if(!t)return"N/A";if(Array.isArray(t.genres)&&t.genres.length>0){const e=t.genres.map(a=>a.genre).filter(Boolean).map(a=>a.trim()).filter((a,n,i)=>i.indexOf(a)===n);if(e.length)return e.join(", ")}const r=[t.strGenre,t.strGenre2,t.strGenre3,t.strStyle,t.strMood,t.strMood2,t.strMood3].filter(e=>typeof e=="string"&&e.trim()).map(e=>e.trim()).filter((e,a,n)=>n.indexOf(e)===a);return r.length?r.join(", "):"N/A"}async function x(t){var g;const r=document.createElement("div");r.className="artist-card";let e=t;if(t.idArtist)try{const u=await b(t.idArtist);(g=u==null?void 0:u.artists)!=null&&g[0]&&(e=u.artists[0])}catch{}const a=document.createElement("img");a.src=e.strArtistThumb||"https://placehold.co/150x150/cccccc/333333?text=No+Image",a.alt=e.strArtist||"No Image",a.addEventListener("error",function(){this.src.includes("placehold.co")||(this.src="https://placehold.co/150x150/cccccc/333333?text=No+Image",this.alt="No Image Available")}),r.appendChild(a);const n=document.createElement("h3");n.textContent=e.strArtist||"Unknown Artist",r.appendChild(n);const i=document.createElement("p"),o=document.createElement("strong");o.textContent="Genres: ",i.appendChild(o);const L=document.createTextNode(I(e));i.appendChild(L),r.appendChild(i);const f=document.createElement("p");f.className="artist-description";const m=e.strBiographyEN||"No short info available.";f.textContent=m.length>200?m.slice(0,200)+"...":m,r.appendChild(f);const c=document.createElement("button");return c.className="learn-more-btn",c.textContent="Learn More",e.idArtist?c.dataset.artistId=e.idArtist:c.disabled=!0,r.appendChild(c),r}async function A(){try{if(N(),d===0){const r=await E(),e=Array.isArray(r)?r:Array.isArray(r.artists)?r.artists:null;if(!e){alert("Error: Received invalid data from server."),s==null||s.classList.add("hidden"),s==null||s.setAttribute("disabled",!0);return}p=e,l.innerHTML=""}const t=p.slice(d,d+y);for(const r of t){const e=await x(r);l.appendChild(e)}d+=y,d>=p.length?(s==null||s.classList.add("hidden"),s==null||s.setAttribute("disabled",!0)):(s==null||s.classList.remove("hidden"),s==null||s.removeAttribute("disabled"))}catch{alert("Failed to load artists. Please try again later."),s==null||s.classList.add("hidden"),s==null||s.setAttribute("disabled",!0)}finally{v()}}function w(){l=document.getElementById("artistsContainer"),s=document.getElementById("loadMoreBtn"),!(!l||!s)&&(s.onclick=A,A(),l.addEventListener("click",async t=>{if(t.target.classList.contains("learn-more-btn")){const r=t.target.dataset.artistId;if(!r){alert("Невідомий артист. Ідентифікатор відсутній.");return}try{const e=await b(r);if(!e||!e.artists||!e.artists[0]){alert("Artist details not found.");return}}catch{alert("Failed to load artist details.")}}}))}document.addEventListener("DOMContentLoaded",()=>{w()});
//# sourceMappingURL=index.js.map
