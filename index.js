import{a as y}from"./assets/vendor-B2YOV0tR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();const p=y.create({baseURL:"https://sound-wave.b.goit.study/api",timeout:5e3,headers:{"Content-Type":"application/json"}});p.interceptors.response.use(t=>t,t=>(alert("Сталася помилка при запиті до сервера. Спробуйте ще раз."),Promise.reject(t)));async function b(){try{return(await p.get("/artists")).data}catch(t){throw t}}async function A(t){try{return(await p.get(`/artists/${t}`)).data}catch(e){throw e}}let c=0;const h=8;let l=[],u,s;function L(){const t=document.getElementById("loader");t&&t.classList.remove("hidden")}function v(){const t=document.getElementById("loader");t&&t.classList.add("hidden")}function g(t){const e=[t.strGenre,t.strStyle,t.strMood,t.strGenre2,t.strGenre3,t.strMood2,t.strMood3].filter(Boolean);return e.length>0?e.join(", "):"N/A"}function E(t){const e=document.createElement("div");e.className="artist-card";const r=document.createElement("img");r.src=t.strArtistThumb||"https://placehold.co/150x150/cccccc/333333?text=No+Image",r.alt=t.strArtist||"No Image",r.addEventListener("error",function(){this.src.includes("placehold.co")||(this.src="https://placehold.co/150x150/cccccc/333333?text=No+Image",this.alt="No Image Available")}),e.appendChild(r);const o=document.createElement("h3");o.textContent=t.strArtist||"Unknown Artist",e.appendChild(o);const n=document.createElement("p"),a=document.createElement("strong");a.textContent="Genres: ",n.appendChild(a),n.append(g(t)),e.appendChild(n);const i=document.createElement("p");i.className="artist-description";const m=t.strBiographyEN||"No short info available.";i.textContent=m.length>200?m.slice(0,200)+"...":m,e.appendChild(i);const d=document.createElement("button");return d.className="learn-more-btn",d.textContent="Learn More",d.dataset.artistId=t.idArtist,e.appendChild(d),e}async function f(){try{if(L(),c===0){const e=await b(),r=Array.isArray(e)?e:Array.isArray(e.artists)?e.artists:null;if(!r){alert("Error: Received invalid data from server."),s==null||s.classList.add("hidden"),s==null||s.setAttribute("disabled",!0);return}l=r}l.slice(c,c+h).forEach(e=>{const r=E(e);u.appendChild(r)}),c+=h,console.log(`Loaded ${c} of ${l.length} artists`),c>=l.length?(s==null||s.classList.add("hidden"),s==null||s.setAttribute("disabled",!0)):(s==null||s.classList.remove("hidden"),s==null||s.removeAttribute("disabled"))}catch{alert("Failed to load artists. Please try again later."),s==null||s.classList.add("hidden"),s==null||s.setAttribute("disabled",!0)}finally{v()}}function C(t){const e=document.createElement("div");e.className="modal-overlay";const r=document.createElement("div");r.className="modal",r.innerHTML=`
        <button class="modal-close-btn">&times;</button>
        <h2>${t.strArtist||"Unknown Artist"}</h2>
        <img src="${t.strArtistThumb||"https://placehold.co/300x300?text=No+Image"}" alt="${t.strArtist}" />
        <p><strong>Genres:</strong> ${g(t)}</p>
        <p>${t.strBiographyEN||"No biography available."}</p>
    `,e.appendChild(r),document.body.appendChild(e),e.addEventListener("click",o=>{(o.target.classList.contains("modal-overlay")||o.target.classList.contains("modal-close-btn"))&&e.remove()})}function N(){u=document.getElementById("artistsContainer"),s=document.getElementById("loadMoreBtn"),!(!u||!s)&&(s.onclick=f,f(),u.addEventListener("click",async t=>{if(t.target.classList.contains("learn-more-btn")){const e=t.target.dataset.artistId;try{const r=await A(e);if(!r||!r.artists||!r.artists[0]){alert("Artist details not found.");return}C(r.artists[0])}catch{alert("Failed to load artist details.")}}}))}document.addEventListener("DOMContentLoaded",()=>{N()});
//# sourceMappingURL=index.js.map
