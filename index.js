import{a as p}from"./assets/vendor-B2YOV0tR.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const u=p.create({baseURL:"https://sound-wave.b.goit.study/api",timeout:5e3,headers:{"Content-Type":"application/json"}});u.interceptors.response.use(t=>t,t=>(alert("Сталася помилка при запиті до сервера. Спробуйте ще раз."),Promise.reject(t)));async function h(){try{return(await u.get("/artists")).data}catch(t){throw t}}async function g(t){try{return(await u.get(`/artists/${t}`)).data}catch(s){throw s}}const f=8;let d,e;function y(){const t=document.getElementById("loader");t&&t.classList.remove("hidden")}function A(){const t=document.getElementById("loader");t&&t.classList.add("hidden")}function L(t){const s=[t.strGenre,t.strStyle,t.strMood,t.strGenre2,t.strGenre3,t.strMood2,t.strMood3].filter(Boolean);return s.length>0?s.join(", "):"N/A"}function b(t){const s=document.createElement("div");s.className="artist-card";const n=document.createElement("img");n.src=t.strArtistThumb||"https://placehold.co/150x150/cccccc/333333?text=No+Image",n.alt=t.strArtist||"No Image",n.addEventListener("error",function(){this.src.includes("placehold.co")||(this.src="https://placehold.co/150x150/cccccc/333333?text=No+Image",this.alt="No Image Available")}),s.appendChild(n);const a=document.createElement("h3");a.textContent=t.strArtist||"Unknown Artist",s.appendChild(a);const r=document.createElement("p"),i=document.createElement("strong");i.textContent="Genres: ",r.appendChild(i),r.append(L(t)),s.appendChild(r);const o=document.createElement("p");o.className="artist-description";const l=t.strBiographyEN||"No short info available.";o.textContent=l.length>200?l.slice(0,200)+"...":l,s.appendChild(o);const c=document.createElement("button");return c.className="learn-more-btn",c.textContent="Learn More",c.dataset.artistId=t.idArtist,s.appendChild(c),s}async function m(){try{if(y(),offset===0){const s=await h(),n=Array.isArray(s)?s:Array.isArray(s.artists)?s.artists:null;if(!n){alert("Error: Received invalid data from server."),e==null||e.classList.add("hidden"),e==null||e.setAttribute("disabled",!0);return}allArtists=n}allArtists.slice(offset,offset+f).forEach(s=>{const n=b(s);d.appendChild(n)}),offset+=f,console.log(`Loaded ${offset} of ${allArtists.length} artists`),offset>=allArtists.length?(e==null||e.classList.add("hidden"),e==null||e.setAttribute("disabled",!0)):(e==null||e.classList.remove("hidden"),e==null||e.removeAttribute("disabled"))}catch{alert("Failed to load artists. Please try again later."),e==null||e.classList.add("hidden"),e==null||e.setAttribute("disabled",!0)}finally{A()}}function E(){d=document.getElementById("artistsContainer"),e=document.getElementById("loadMoreBtn"),!(!d||!e)&&(e.onclick=m,m(),d.addEventListener("click",async t=>{if(t.target.classList.contains("learn-more-btn")){const s=t.target.dataset.artistId;try{const n=await g(s);if(!n||!n.artists||!n.artists[0]){alert("Artist details not found.");return}console.log("Artist details:",n.artists[0])}catch{alert("Failed to load artist details.")}}}))}document.addEventListener("DOMContentLoaded",()=>{E()});
//# sourceMappingURL=index.js.map
