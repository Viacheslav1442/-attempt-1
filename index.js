import{a as g}from"./assets/vendor-B2YOV0tR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const p=g.create({baseURL:"https://sound-wave.b.goit.study/api",timeout:5e3,headers:{"Content-Type":"application/json"}});p.interceptors.response.use(t=>t,t=>(alert("Сталася помилка при запиті до сервера. Спробуйте ще раз."),Promise.reject(t)));async function A(){try{return(await p.get("/artists")).data}catch(t){throw t}}async function L(t){try{return(await p.get(`/artists/${t}`)).data}catch(e){throw e}}let c=0;const h=8;let u=[],l,n;function v(){const t=document.getElementById("loader");t&&t.classList.remove("hidden")}function E(){const t=document.getElementById("loader");t&&t.classList.add("hidden")}function y(t){const e=[t.strGenre,t.strStyle,t.strMood,t.strGenre2,t.strGenre3,t.strMood2,t.strMood3].filter(Boolean);return e.length>0?e.join(", "):"N/A"}function b(t){const e=document.createElement("div");e.className="artist-card";const r=document.createElement("img");r.src=t.strArtistThumb||"https://placehold.co/150x150/cccccc/333333?text=No+Image",r.alt=t.strArtist||"No Image",r.addEventListener("error",function(){this.src.includes("placehold.co")||(this.src="https://placehold.co/150x150/cccccc/333333?text=No+Image",this.alt="No Image Available")}),e.appendChild(r);const a=document.createElement("h3");a.textContent=t.strArtist||"Unknown Artist",e.appendChild(a);const s=document.createElement("p"),o=document.createElement("strong");o.textContent="Genres: ",s.appendChild(o),s.append(y(t)),e.appendChild(s);const i=document.createElement("p");i.className="artist-description";const m=t.strBiographyEN||"No short info available.";i.textContent=m.length>200?m.slice(0,200)+"...":m,e.appendChild(i);const d=document.createElement("button");return d.className="learn-more-btn",d.textContent="Learn More",d.dataset.artistId=t.idArtist,e.appendChild(d),e}async function f(){try{if(v(),c===0){const e=await A(),r=Array.isArray(e)?e:Array.isArray(e.artists)?e.artists:null;if(!r){alert("Error: Received invalid data from server."),n==null||n.classList.add("hidden");return}u=r}u.slice(c,c+h).forEach(e=>{const r=b(e);l.appendChild(r)}),c+=h,c>=u.length?n==null||n.classList.add("hidden"):n==null||n.classList.remove("hidden")}catch{alert("Failed to load artists. Please try again later."),n==null||n.classList.add("hidden")}finally{E()}}function C(t){const e=document.createElement("div");e.className="modal-overlay";const r=document.createElement("div");r.className="modal",r.innerHTML=`
        <button class="modal-close-btn">&times;</button>
        <h2>${t.strArtist||"Unknown Artist"}</h2>
        <img src="${t.strArtistThumb||"https://placehold.co/300x300?text=No+Image"}" alt="${t.strArtist}" />
        <p><strong>Genres:</strong> ${y(t)}</p>
        <p>${t.strBiographyEN||"No biography available."}</p>
    `,e.appendChild(r),document.body.appendChild(e),e.addEventListener("click",a=>{(a.target.classList.contains("modal-overlay")||a.target.classList.contains("modal-close-btn"))&&e.remove()})}function N(){l=document.getElementById("artistsContainer"),n=document.getElementById("loadMoreBtn"),!(!l||!n)&&(n.onclick=f,f(),l.addEventListener("click",async t=>{if(t.target.classList.contains("learn-more-btn")){const e=t.target.dataset.artistId;try{const r=await L(e);if(!r||!r.artists||!r.artists[0]){alert("Artist details not found.");return}C(r.artists[0])}catch{alert("Failed to load artist details.")}}}))}document.addEventListener("DOMContentLoaded",()=>{N()});
//# sourceMappingURL=index.js.map
