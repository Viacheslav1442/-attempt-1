import{a as x}from"./assets/vendor-B2YOV0tR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();const y=x.create({baseURL:"https://sound-wave.b.goit.study/api",timeout:5e3,headers:{"Content-Type":"application/json"}});y.interceptors.response.use(t=>t,t=>(alert("Сталася помилка при запиті до сервера. Спробуйте ще раз."),Promise.reject(t)));async function v(){try{return(await y.get("/artists")).data}catch(t){throw t}}async function E(t){try{return(await y.get(`/artists/${t}`)).data}catch(e){throw e}}let d=0;const b=8;let h=[],l,r;function I(){const t=document.getElementById("loader");t&&t.classList.remove("hidden")}function w(){const t=document.getElementById("loader");t&&t.classList.add("hidden")}function C(t){if(!t||typeof t!="object")return"N/A";const e=[t.strGenre,t.strGenre2,t.strGenre3,t.strStyle,t.strMood,t.strMood2,t.strMood3].filter(s=>typeof s=="string"&&s.trim()).map(s=>s.trim()).filter((s,o,n)=>n.indexOf(s)===o);return e.length?e.join(", "):"N/A"}async function O(t){var g;const e=document.createElement("div");e.className="artist-card";const s=document.createElement("img");s.src=t.strArtistThumb||"https://placehold.co/150x150/cccccc/333333?text=No+Image",s.alt=t.strArtist||"No Image",s.addEventListener("error",function(){this.src.includes("placehold.co")||(this.src="https://placehold.co/150x150/cccccc/333333?text=No+Image",this.alt="No Image Available")}),e.appendChild(s);const o=document.createElement("h3");o.textContent=t.strArtist||"Unknown Artist",e.appendChild(o);const n=document.createElement("p"),i=document.createElement("strong");i.textContent="Genres: ",n.appendChild(i);let a=C(t);const u=document.createTextNode(a);n.appendChild(u),e.appendChild(n);const m=document.createElement("p");m.className="artist-description";const p=t.strBiographyEN||"No short info available.";m.textContent=p.length>200?p.slice(0,200)+"...":p,e.appendChild(m);const c=document.createElement("button");if(c.className="learn-more-btn",c.textContent="Learn More",t.idArtist?c.dataset.artistId=t.idArtist:c.disabled=!0,e.appendChild(c),t.idArtist)try{const f=await E(t.idArtist),A=(g=f==null?void 0:f.artists)==null?void 0:g[0];if(A){const N=C(A);u.textContent=N}else u.textContent="N/A"}catch{u.textContent="N/A"}return e}async function L(){try{if(I(),d===0){const e=await v(),s=Array.isArray(e)?e:Array.isArray(e.artists)?e.artists:null;if(!s){alert("Error: Received invalid data from server."),r==null||r.classList.add("hidden"),r==null||r.setAttribute("disabled",!0);return}h=s,l.innerHTML=""}const t=h.slice(d,d+b);for(const e of t){const s=await O(e);l.appendChild(s)}d+=b,d>=h.length?(r==null||r.classList.add("hidden"),r==null||r.setAttribute("disabled",!0)):(r==null||r.classList.remove("hidden"),r==null||r.removeAttribute("disabled"))}catch{alert("Failed to load artists. Please try again later."),r==null||r.classList.add("hidden"),r==null||r.setAttribute("disabled",!0)}finally{w()}}function P(){l=document.getElementById("artistsContainer"),r=document.getElementById("loadMoreBtn"),!(!l||!r)&&(r.onclick=L,L(),l.addEventListener("click",async t=>{if(t.target.classList.contains("learn-more-btn")){const e=t.target.dataset.artistId;if(!e){alert("Невідомий артист. Ідентифікатор відсутній.");return}try{const s=await E(e);if(!s||!s.artists||!s.artists[0]){alert("Artist details not found.");return}}catch{alert("Failed to load artist details.")}}}))}document.addEventListener("DOMContentLoaded",()=>{P()});
//# sourceMappingURL=index.js.map
