import{a as g}from"./assets/vendor-B2YOV0tR.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const m=g.create({baseURL:"https://sound-wave.b.goit.study/api",timeout:5e3,headers:{"Content-Type":"application/json"}});m.interceptors.response.use(t=>t,t=>(alert("Сталася помилка при запиті до сервера. Спробуйте ще раз."),Promise.reject(t)));async function y(){try{return(await m.get("/artists")).data}catch(t){throw t}}async function A(t){try{return(await m.get(`/artists/${t}`)).data}catch(r){throw r}}let o=0;const p=8;let l=[],u,e;function L(){const t=document.getElementById("loader");t&&t.classList.remove("hidden")}function b(){const t=document.getElementById("loader");t&&t.classList.add("hidden")}function E(t){const r=[t.strGenre,t.strStyle,t.strMood,t.strGenre2,t.strGenre3,t.strMood2,t.strMood3].filter(Boolean);return r.length>0?r.join(", "):"N/A"}function C(t){const r=document.createElement("div");r.className="artist-card";const n=document.createElement("img");n.src=t.strArtistThumb||"https://placehold.co/150x150/cccccc/333333?text=No+Image",n.alt=t.strArtist||"No Image",n.addEventListener("error",function(){this.src.includes("placehold.co")||(this.src="https://placehold.co/150x150/cccccc/333333?text=No+Image",this.alt="No Image Available")}),r.appendChild(n);const c=document.createElement("h3");c.textContent=t.strArtist||"Unknown Artist",r.appendChild(c);const s=document.createElement("p"),i=document.createElement("strong");i.textContent="Genres: ",s.appendChild(i),s.append(E(t)),r.appendChild(s);const a=document.createElement("p");a.className="artist-description";const f=t.strBiographyEN||"No short info available.";a.textContent=f.length>200?f.slice(0,200)+"...":f,r.appendChild(a);const d=document.createElement("button");return d.className="learn-more-btn",d.textContent="Learn More",d.dataset.artistId=t.idArtist,r.appendChild(d),r}async function h(){try{if(L(),o===0){const r=await y(),n=Array.isArray(r)?r:Array.isArray(r.artists)?r.artists:null;if(!n){alert("Error: Received invalid data from server."),e==null||e.classList.add("hidden"),e==null||e.setAttribute("disabled",!0);return}l=n}l.slice(o,o+p).forEach(r=>{const n=C(r);u.appendChild(n)}),o+=p,console.log(`Loaded ${o} of ${l.length} artists`),o>=l.length?(e==null||e.classList.add("hidden"),e==null||e.setAttribute("disabled",!0)):(e==null||e.classList.remove("hidden"),e==null||e.removeAttribute("disabled"))}catch{alert("Failed to load artists. Please try again later."),e==null||e.classList.add("hidden"),e==null||e.setAttribute("disabled",!0)}finally{b()}}function v(){u=document.getElementById("artistsContainer"),e=document.getElementById("loadMoreBtn"),!(!u||!e)&&(e.onclick=h,h(),u.addEventListener("click",async t=>{if(t.target.classList.contains("learn-more-btn")){const r=t.target.dataset.artistId;try{const n=await A(r);if(!n||!n.artists||!n.artists[0]){alert("Artist details not found.");return}console.log("Artist details:",n.artists[0])}catch{alert("Failed to load artist details.")}}}))}document.addEventListener("DOMContentLoaded",()=>{v()});
//# sourceMappingURL=index.js.map
